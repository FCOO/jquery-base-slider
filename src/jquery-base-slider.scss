/***********************************************
jquery-base-slider.scss, Description from README.md

    (c) 2015, FCOO

    https://github.com/fcoo/jquery-base-slider
    https://github.com/fcoo

There are four different types of sliders:
default, small, round and range

The type is set by adding the same class-name to the outer <span> eq. <span class="base-slider round....">

The scss is divided in two parts: First the common part equal for all types and then a specified part for the different types

************************************************/
//BOURBON - http://bourbon.io/
@import "../bower_components/bourbon/app/assets/stylesheets/bourbon";

@function myRem($pxval) {
  $base: 16;
  $em-base: 16px;
  @return ($pxval / $em-base) * 1rem;
}


//'Global' variables
$border-color    : rgb(175,179,187);
$shadow-color    : rgb(175,179,187);
$background-color: rgb(209,214,224);

$border-width-px: 1px;
$border-width   : myRem($border-width-px);
$border         : $border-width solid $border-color;
$border-black   : $border-width solid black;

//marker = small boxes over min- and max and from- and to-slider
$marker-top               : myRem(0px);
$marker-font-size         : myRem(10px);
$marker-line-height       : 1.333;
$marker-top-bottom-padding: myRem(1px);
$marker-left-right-padding: myRem(5px);
$marker-stick-height      : myRem(3px);

$marker-height            : $border-width + $marker-top-bottom-padding + $marker-font-size*$marker-line-height + $marker-top-bottom-padding + $border-width + $marker-stick-height;

$marker-padding         : $marker-top-bottom-padding $marker-left-right-padding;
$marker-border-radius   : myRem(4px);


//slider
$slider-top          : $marker-top + $marker-height;
$slider-top-no-marker: $marker-top;

//The line
$line-height-px     : 6px;
$line-height        : myRem($line-height-px);

$line-border-radius : myRem(2px);

//The line when it is a range-slider
$range-line-top          : $marker-height;
$range-line-top-no-marker: myRem(0px);

//Special: Pin marking a value
$pin-height    : 48 / 28 * $line-height;  //The height of the pin used to mark the range-value. Calculated to fit with width=$line-height
$pin-margin-top: -0.8 * $pin-height; 

$range-value-line-top: $marker-height;


//Ticks on grids
$tick-width       : myRem(1px); 
$tick-height-minor: $line-height;
$tick-height      : 1.5 * $tick-height-minor;
$label-font-size  : myRem(9px);
$label-height     : 1.2 * $label-font-size;
$margin           : myRem(2px);

$box-shadow: 1px 1px 1px 0px rgba(255,255,255,0.75), -1px 1px 1px 0px rgba(255,255,255,0.75);

.base-slider-container-outer {
    left      : 0;
    width     : 100%; 
    height    : 100%;
    overflow-x: hidden;

    .base-slider-container-full-width {
        position  : relative;
        left      : 0;
        overflow-y: visible;
    }
}

/***************************************************************
COMMON STYLE
***************************************************************/
.base-slider-container {
    position   : relative; 
    display    : block;
    user-select: none;

    .line {

        position: relative; 
        display: block;
        overflow: hidden;
        outline: none !important;
        box-sizing: border-box;
        height: $line-height; 

        border: $border;
        @include border-right-radius($line-border-radius);
        @include border-left-radius($line-border-radius);
        box-shadow: inset 0px myRem(1px) myRem(1px) 0 $shadow-color; 

        background-color: $background-color;
        cursor: pointer;

        .line-left { 
            position: absolute; 
            display: none;
            top: 0;
            left: 0; 
            width: 11%;
            height: 100%;
        } 
    } //end of .line

    //Adjust display and background-color when impact or impact-revers is set
    &.impact-line .line, &.impact-line-reverse .line {
        box-shadow: none !important;
        .line-left { display: block; }
    }

    &.impact-line .line {
        .line-left { background-color: green; }
        background-color: red;
    }
    
    &.impact-line-reverse .line {
        .line-left { background-color: red; }
        background-color: green;
    }

    .bar {
        position  : absolute; 
        display   : block;
        box-sizing: border-box;
        left      : 0; 
        width     : 0;
        height    : $line-height; 

        border: $border;
        @include border-left-radius($line-border-radius);
        border-right: none;
        cursor: pointer;

        background-color: #428BCA;
        &.hide-bar-color { background-color: inherit }
    }

    &.impact-line .bar, &.impact-line-reverse .bar {
        background-color: yellow;
    }
    

    //Adjust cursor when slider is disabled or read-only
    &.not-clickable .line,
    &.not-clickable .bar,
    &.disabled .line,
    &.disabled .bar,
    &.read-only .line,
    &.read-only .bar { 
        cursor: default;
    } 


    //The slider
    .slider {
        position: absolute; 
        display : block;
        cursor  : default;
        z-index : 10;
        top     : $slider-top;

        background-size: 100% 100%;
        background-repeat: no-repeat;

        &.type_last { z-index: 12; }

    } //end of .slider

    &.active .slider { cursor: pointer; }

    //Special version when a pin is added: using font-icons instead of background-image
    .pin {
        position: absolute; 
        cursor  : default !important;
        z-index : 100;

        height    : $pin-height !important;
        margin-top: $pin-margin-top;
        
        font-size : $pin-height;
        text-align: center;
    }


    //Marker: Current, min and max-marker/labels
    .marker-min, .marker-max {
        position        : absolute; 
        display         : block;
        cursor          : default;
        color           : #555;
        font-family     : Arial, sans-serif; 
        font-size       : $marker-font-size; 
        line-height     : $marker-line-height;
        text-shadow     : none;
        top             : $marker-top; 
        padding         : $marker-padding; 
        border          : $border;
        background-color: $background-color;
        border-radius   : myRem(2px);

        &.marker-min { left: 0;  }
        &.marker-max { right: 0; }
    }

    .marker-from, .marker-to, .marker-single {
        position   : absolute; 
        display    : block;
        top        : $marker-top + $border-width; 
        left       : 0;
        cursor     : default;
        white-space: nowrap;
        color      : #111;
        font-family: Arial, sans-serif; 
        font-size  : $marker-font-size; 
        line-height: $marker-line-height;
        text-shadow: none;
        padding    : $marker-padding;
    }
    
    //If not force edge => add border and stick
    &.marker-frame .marker-from, 
    &.marker-frame .marker-to, 
    &.marker-frame .marker-single {
        top          : $marker-top; 
        background   : white;
        border       : $border-black;
        border-radius: $marker-border-radius;

        box-shadow   : $box-shadow;


        &:after {
            position        : absolute; 
            display         : block; 
            content         : "";
            bottom          : -2.3*$marker-stick-height; 
            left            : 50%;
            width           : 0; 
            height          : 0;
            margin-left     : -1*$marker-stick-height;
            overflow        : hidden;
            border          : $marker-stick-height solid transparent;
            border-top-color: black;
        }
    }
} //end of .base-slider-container



.grid {
    position: absolute; 
    bottom  : 0; 
    left    : 0;
    z-index : 2;
    width   : 100%; 
    height  : $tick-height + $margin + $label-height; 
    &.text-between-ticks { 
        height: $margin + max($tick-height, $label-height); 
        .grid-text { top: $margin; }; 
    }
    
    .grid-pol {
        position  : absolute;
        z-index   : 2;
        top       : 0; 
        left      : 0;
        width     : $tick-width; 
        height    : $tick-height;
        background: black; 
        box-shadow: $box-shadow;

        &.minor { height: $tick-height-minor; background: #555555; }
        &.red   { background: red; }
    }

    .grid-text {
        position: absolute;
        z-index : 2;
        top     : $tick-height + $margin;
        &.low { 
            top: $tick-height + $margin + $label-height + $margin; 
        }
        background-color: transparent;
        left       : 0;
        white-space: nowrap;
        text-align : center;
        font-family: Arial, sans-serif; 

        font-size  : $label-font-size; 
        line-height: 1; 
        font-weight: bold;
        &.minor  { font-weight: normal; color: #555555;}
        &.italic { font-style: italic; }

        padding: 0;
        
        color: #000;
        cursor: default; 
        &.clickable { cursor: pointer; }

        &.frame {
            border       : $border;
            border-radius: $marker-border-radius;
            padding      : $marker-padding;
            margin-left  : -1*($marker-left-right-padding + $border-width);
            margin-top   : -1*($marker-top-bottom-padding + $border-width);
            line-height  : 1; 
        }
    }

    .grid-color {
        position: absolute;
        z-index : 1;
        top     : 0; 
        height  : $tick-height;

        font-size: 2*$tick-height;

        text-align : center;
        line-height: $tick-height;
        overflow: hidden;

        &.gt_max {
            left: 100%;
            //Create triangle pointing to the right
            width: 0;
            height: 0;
            border: 0 solid transparent;
            border-bottom-width: $tick-height / 2;
            border-top-width: $tick-height / 2;
            border-left: $tick-height solid black;
        }
        &.lt_min { 
            left: -1*$tick-height; 
            //Create triangle pointing to the left
            width: 0;
            height: 0;
            border: 0 solid transparent;
            border-top-width: $tick-height / 2;
            border-bottom-width: $tick-height / 2;
            border-right: $tick-height solid black;
        }
    }


} //end of .grid


.disabled {
    opacity: 0.4;
}


.hidden-input {
    position    : absolute !important;
    display     : block !important;
    top         : 0 !important;
    left        : 0 !important;
    width       : 0 !important;
    height      : 0 !important;
    font-size   : 0 !important;
    line-height : 0 !important;
    padding     : 0 !important;
    margin      : 0 !important;
    outline     : none !important;
    z-index     : -9999 !important;
    background  : none !important;
    border-style: solid !important;
    border-color: transparent !important;
}

/***************************************************************
STYLE FOR SPECIFIC TYPE
***************************************************************/

$slider-type-list: horizontal, vertical, down, up, right, left, round, fixed, range;

@each $slider-type in $slider-type-list {
    $slider-dim   : 22px;
    $img-width    : null;
    $img-height   : null;
    $slider-width : null; 
    $slider-height: null;
    $line-top-relative-to-slider: null;
    $grid-top                   : null;

    $slider-back-ground-image         : null;
    $slider-back-ground-image_hover   : null;
    $slider-back-ground-image_to      : null;
    $slider-back-ground-image_to_hover: null;



    @if $slider-type == horizontal {
        $img-width : 44px;
        $img-height: 71.5px;
        $slider-back-ground-image      : 'slider.horizontal.svg';
        $slider-back-ground-image_hover: 'slider.horizontal.hover.svg';;
    }
    @if $slider-type == vertical {
        $img-width : 71.5px;
        $img-height: 44px;
        $slider-back-ground-image      : 'slider.vertical.svg';
        $slider-back-ground-image_hover: 'slider.vertical.hover.svg';;
    }

    @if $slider-type == down {
        $img-width : 44px;
        $img-height: 70.75px;
        $slider-back-ground-image      : 'slider.down.svg';
        $slider-back-ground-image_hover: 'slider.down.hover.svg';;
    }
    @if $slider-type == up {
        $img-width : 44px;
        $img-height: 70.75px;
        $slider-back-ground-image      : 'slider.up.svg';
        $slider-back-ground-image_hover: 'slider.up.hover.svg';;
    }
    @if $slider-type == right {
        $img-width : 70.75px;
        $img-height: 44px;
        $slider-back-ground-image      : 'slider.right.svg';
        $slider-back-ground-image_hover: 'slider.right.hover.svg';;
    }
    @if $slider-type == left {
        $img-width : 70.75px;
        $img-height: 44px;
        $slider-back-ground-image      : 'slider.left.svg';
        $slider-back-ground-image_hover: 'slider.left.hover.svg';;
    }

    @if $slider-type == round {
        $img-width : 70px;
        $img-height: 70px;
        $slider-dim: 18px;

        $slider-back-ground-image      : 'slider.round.svg';
        $slider-back-ground-image_hover: 'slider.round.hover.svg';;
    }

    @if $slider-type == fixed {
        $img-width : 44px;
        $img-height: 70.75px;
        $slider-dim: 18px;

        $slider-back-ground-image: 'slider.fixed.svg';

        $line-top-relative-to-slider: $margin;
        $grid-top   : $slider-top + $line-top-relative-to-slider + /*$margin + */$line-height; 
    }

    @if $slider-type == range {
        $img-width : 6px;
        $img-height: 6px;
        $slider-dim: $line-height-px;

        $slider-back-ground-image   : 'slider.range.from.svg';
        $slider-back-ground-image_to: 'slider.range.to.svg';

        $line-top-relative-to-slider: 0; 
    }
    

    $factor: 0;
    @if $img-height > $img-width {
        $factor: $slider-dim / $img-height;
    } @else {
        $factor: $slider-dim / $img-width;
    }

    $slider-width : myRem($img-width * $factor);
    $slider-height: myRem($img-height * $factor); 

    @if $line-top-relative-to-slider == null {
        $line-top-relative-to-slider: $slider-height/2 - $line-height/2;
    }

    @if $grid-top == null {
        $grid-top: $slider-top + $slider-height;
    }

    $lineTop        : $slider-top + $line-top-relative-to-slider;
    $lineTopNoMarker: $slider-top-no-marker + $line-top-relative-to-slider;

    $slider-back-ground-image: url("images/#{$slider-back-ground-image}");
    @if $slider-back-ground-image_hover != null {
        $slider-back-ground-image_hover: url("images/#{$slider-back-ground-image_hover}");
    }

    @if $slider-back-ground-image_to != null {
        $slider-back-ground-image_to: url("images/#{$slider-back-ground-image_to}");
    }
    @if $slider-back-ground-image_to_hover != null {
        $slider-back-ground-image_to_hover: url("images/#{$slider-back-ground-image_to_hover}");
    }

    //The style for different slider-type
    .base-slider-container.#{$slider-type} {
       
        //width, height and postion    
        .line, .bar {
            top: $lineTop;
        }
        .slider {
            box-sizing: border-box;
            width : $slider-width; 
            height: $slider-height;

            //If there are different bg-image for from and to-slider => create style for each ELSE common style
            @if $slider-back-ground-image_to == null {
                background-image: $slider-back-ground-image;
            }
            @else {
                &.from {               
                    background-image: $slider-back-ground-image;
                }
                &.to {               
                    background-image: $slider-back-ground-image_to;
                }
            }
        }
        
        .pin { 
            top: $lineTop;
            width : $slider-width; 
        }

        @if $slider-back-ground-image_hover != null {
            //hover on slider but only if it is active (not read-only)
            &.active .slider {
                &.state_hover, &:hover { 
                    //If there are different bg-image for from and to-slider => create style for each ELSE common style
                    @if $slider-back-ground-image_to_hover == null {
                        background-image: $slider-back-ground-image_hover;
                    }
                    @else {
                        &.from {               
                            background-image: $slider-back-ground-image_hover;
                        }
                        &.to {               
                            background-image: $slider-back-ground-image_to_hover;
                        }
                    }
                } 
            }
        }

        .grid {
            top: $grid-top;
        }


        //Adjust grid position if ticks are on the line (ticks_on_line = true)
        &.ticks-on-line {
            .grid             { top: $lineTop;         }
            &.no-marker .grid { top: $lineTopNoMarker; }
        }

        //Adjust all top-position if there are no marker
        &.no-marker {
            .line, 
            .bar,
            .pin    { top: $lineTopNoMarker !important;        }
            .slider { top: $slider-top-no-marker;                 }
            .grid   { top: $slider-top-no-marker + $slider-height; }
        }

        /****************************************************
        Special case for no marker and pin: 
        Adjust all top-position by adding top-margin if the pin is heigher than the slider
        ****************************************************/
        &.no-marker.has-pin {
            margin-top: max(0, - $pin-margin-top - $lineTopNoMarker);
        }
    } //end of .base-slider-container.#{$slider-type}
} //end of @each $slider-type in $slider-type-list 

