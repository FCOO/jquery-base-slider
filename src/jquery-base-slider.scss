/***********************************************
jquery-base-slider.scss, Description from README.md

    (c) 2015, FCOO

    https://github.com/fcoo/jquery-base-slider
    https://github.com/fcoo

There are four different types of sliders:
default, small, round and range

The type is set by adding the same class-name to the outer <span> eq. <span class="base-slider round....">

The scss is divided in two parts: First the common part equal for all types and then a specified part for the different types

************************************************/
//BOURBON - http://bourbon.io/
@import "../bower_components/bourbon/app/assets/stylesheets/bourbon";

@function myRem($pxval) {
  $base: 16;
  $em-base: 16px;
  @return ($pxval / $em-base) * 1rem;
}


//'Global' variables
$border-color    : rgb(175,179,187);
$shadow-color    : rgb(175,179,187);
$background-color: rgb(209,214,224);

//marker = small boxes over min- and max and from- and to-slider
$markerTop              : myRem(0px);
$markerFontSize         : myRem(10px);
$markerLineHeight       : 1.333;
$markerTopBottomPadding : myRem(1px);
$markerBorderSize       : myRem(1px);
$markerStickHeight      : myRem(3px);

$markerHeight           : $markerBorderSize + $markerTopBottomPadding + $markerFontSize*$markerLineHeight + $markerTopBottomPadding + $markerBorderSize + $markerStickHeight;

//slider
$sliderTop        : $markerTop + $markerHeight;
$sliderTopNoMarker: $markerTop;

//The line
$lineHeightPx    : 6px;
$lineHeight      : myRem($lineHeightPx);
$lineBorderSizePx: 1px;
$lineBorderSize  : myRem($lineBorderSizePx);
$lineBorderRadius: myRem(2px);

//The line when it is a range-slider
$rangeLineTop        : $markerHeight;
$rangeLineTopNoMarker: myRem(0px);

//Special: Pin marking a value
$pinHeight   : 48 / 28 * $lineHeight;  //The height of the pin used to mark the range-value. Calculated to fit with width=$lineHeight
$pinMarginTop: -0.8 * $pinHeight; 

$rangeValueLineTop: $markerHeight;


//Ticks on grids
$tickWidth      : myRem(1px); 
$tickHeightMinor: $lineHeight;
$tickHeight     : 1.5 * $tickHeightMinor;
$labelFontSize  : myRem(9px);
$labelHeight    : 1.2 * $labelFontSize;
$margin         : myRem(2px);

.base-slider-container-outer {
    left      : 0;
    width     : 100%; 
    height    : 100%;
    overflow-x: hidden;

    .base-slider-container-full-width {
        position  : relative;
        left      : 0;
        overflow-y: visible;
    }
}

/***************************************************************
COMMON STYLE
***************************************************************/
.base-slider-container {
    position   : relative; 
    display    : block;
    user-select: none;

    .line {

        position: relative; 
        display: block;
        overflow: hidden;
        outline: none !important;
        box-sizing: border-box;
        height: $lineHeight; 

        border: solid $lineBorderSize $border-color;
        @include border-right-radius($lineBorderRadius);
        @include border-left-radius($lineBorderRadius);
        box-shadow: inset 0px myRem(1px) myRem(1px) 0 $shadow-color; 

        background-color: $background-color;
        cursor: pointer;

        .line-left { 
            position: absolute; 
            display: none;
            top: 0;
            left: 0; 
            width: 11%;
            height: 100%;
        } 
    } //end of .line

    //Adjust display and background-color when impact or impact-revers is set
    &.impact-line .line, &.impact-line-reverse .line {
        box-shadow: none !important;
        .line-left { display: block; }
    }

    &.impact-line .line {
        .line-left { background-color: green; }
        background-color: red;
    }
    
    &.impact-line-reverse .line {
        .line-left { background-color: red; }
        background-color: green;
    }

    .bar {
        position  : absolute; 
        display   : block;
        box-sizing: border-box;
        left      : 0; 
        width     : 0;
        height    : $lineHeight; 

        border: solid $lineBorderSize $border-color;
        @include border-left-radius($lineBorderRadius);
        border-right: none;
        cursor: pointer;

        background-color: #428BCA;
        &.hide-bar-color { background-color: inherit }
    }

    &.impact-line .bar, &.impact-line-reverse .bar {
        background-color: yellow;
    }
    

    //Adjust cursor when slider is disabled or read-only
    &.not-clickable .line,
    &.not-clickable .bar,
    &.disabled .line,
    &.disabled .bar,
    &.read-only .line,
    &.read-only .bar { 
        cursor: default;
    } 


    //The slider
    .slider {
        position: absolute; 
        display : block;
        cursor  : default;
        z-index : 10;
        top     : $sliderTop;

        background-size: 100% 100%;
        background-repeat: no-repeat;

        &.type_last { z-index: 12; }

    } //end of .slider

    &.active .slider { cursor: pointer; }

    //Special version when a pin is added: using font-icons instead of background-image
    .pin {
        position: absolute; 
        cursor  : default !important;
        z-index : 100;

        height    : $pinHeight !important;
        margin-top: $pinMarginTop;
        
        font-size : $pinHeight;
        text-align: center;
    }


    //Marker: Current, min and max-marker/labels
    .marker-min, .marker-max {
        position        : absolute; 
        display         : block;
        cursor          : default;
        color           : #555;
        font-family     : Arial, sans-serif; 
        font-size       : $markerFontSize; 
        line-height     : $markerLineHeight;
        text-shadow     : none;
        top             : $markerTop; 
        padding         : $markerTopBottomPadding myRem(3px);
        border          : solid $markerBorderSize $border-color;
        background-color: $background-color;
        border-radius   : myRem(2px);

        &.marker-min { left: 0;  }
        &.marker-max { right: 0; }
    }

    .marker-from, .marker-to, .marker-single {
        position   : absolute; 
        display    : block;
        top        : $markerTop + $markerBorderSize; 
        left       : 0;
        cursor     : default;
        white-space: nowrap;
        color      : #111;
        font-family: Arial, sans-serif; 
        font-size  : $markerFontSize; 
        line-height: $markerLineHeight;
        text-shadow: none;
        padding    : $markerTopBottomPadding myRem(5px);
    }
    
    //If not force edge => add border and stick
    &.marker-frame .marker-from, 
    &.marker-frame .marker-to, 
    &.marker-frame .marker-single {
        top          : $markerTop; 
        background   : white;
        border       : $markerBorderSize solid black;
        border-radius: myRem(4px);
        &:after {
            position        : absolute; 
            display         : block; 
            content         : "";
            bottom          : -2.3*$markerStickHeight; 
            left            : 50%;
            width           : 0; 
            height          : 0;
            margin-left     : -1*$markerStickHeight;
            overflow        : hidden;
            border          : $markerStickHeight solid transparent;
            border-top-color: black;
        }
    }
} //end of .base-slider-container



.grid {
    position: absolute; 
    bottom  : 0; 
    left    : 0;
    z-index : 2;
    width   : 100%; 
    height  : $tickHeight + $margin + $labelHeight; 
    &.text-between-ticks { 
        height: $margin + max($tickHeight, $labelHeight); 
        .grid-text { top: $margin; }; 
    }
    
    .grid-pol {
        position  : absolute;
        z-index   : 2;
        top       : 0; 
        left      : 0;
        width     : $tickWidth; 
        height    : $tickHeight;
        background: black; 
        box-shadow: 1px 1px 1px 0px rgba(255,255,255,0.75), -1px 1px 1px 0px rgba(255,255,255,0.75);

        &.minor { height: $tickHeightMinor; background: #555555; }
        &.red   { background: red; }
    }

    .grid-text {
        position: absolute;
        z-index : 2;
        top     : $tickHeight + $margin;
        &.low { 
            top: $tickHeight + $margin + $labelHeight + $margin; 
        }
        background-color: transparent;
        left: 0;
        white-space: nowrap;
        text-align : center;
        font-family: Arial, sans-serif; 

        font-size  : $labelFontSize; 
        line-height: 1; 
        font-weight: bold;
        &.minor  { font-weight: normal; color: #555555;}
        &.italic { font-style: italic; }

        padding: 0;
        
        color: #000;
        cursor: default; 
        &.clickable { cursor: pointer; }
    }

    .grid-color {
        position: absolute;
        z-index : 1;
        top     : 0; 
        height  : $tickHeight;

        font-size: 2*$tickHeight;

        text-align : center;
        line-height: $tickHeight;
        overflow: hidden;

        &.gt_max {
            left: 100%;
            //Create triangle pointing to the right
            width: 0;
            height: 0;
            border: 0 solid transparent;
            border-bottom-width: $tickHeight / 2;
            border-top-width: $tickHeight / 2;
            border-left: $tickHeight solid black;
        }
        &.lt_min { 
            left: -$tickHeight; 
            //Create triangle pointing to the left
            width: 0;
            height: 0;
            border: 0 solid transparent;
            border-top-width: $tickHeight / 2;
            border-bottom-width: $tickHeight / 2;
            border-right: $tickHeight solid black;
        }
    }


} //end of .grid


.disabled {
    opacity: 0.4;
}


.hidden-input {
    position    : absolute !important;
    display     : block !important;
    top         : 0 !important;
    left        : 0 !important;
    width       : 0 !important;
    height      : 0 !important;
    font-size   : 0 !important;
    line-height : 0 !important;
    padding     : 0 !important;
    margin      : 0 !important;
    outline     : none !important;
    z-index     : -9999 !important;
    background  : none !important;
    border-style: solid !important;
    border-color: transparent !important;
}

/***************************************************************
STYLE FOR SPECIFIC TYPE
***************************************************************/

$sliderTypeList: horizontal, vertical, down, up, right, left, round, fixed, range;

@each $sliderType in $sliderTypeList {
    $slider-dim   : 22px;
    $img-width    : null;
    $img-height   : null;
    $sliderWidth  : null; 
    $sliderHeight : null;
    $lineTopRelativeToSlider    : null;
    $gridTop                    : null;

    $sliderBackgroundImage         : null;
    $sliderBackgroundImage_hover   : null;
    $sliderBackgroundImage_to      : null;
    $sliderBackgroundImage_to_hover: null;



    @if $sliderType == horizontal {
        $img-width : 44px;
        $img-height: 71.5px;
        $sliderBackgroundImage      : 'slider.horizontal.svg';
        $sliderBackgroundImage_hover: 'slider.horizontal.hover.svg';;
    }
    @if $sliderType == vertical {
        $img-width : 71.5px;
        $img-height: 44px;
        $sliderBackgroundImage      : 'slider.vertical.svg';
        $sliderBackgroundImage_hover: 'slider.vertical.hover.svg';;
    }

    @if $sliderType == down {
        $img-width : 44px;
        $img-height: 70.75px;
        $sliderBackgroundImage      : 'slider.down.svg';
        $sliderBackgroundImage_hover: 'slider.down.hover.svg';;
    }
    @if $sliderType == up {
        $img-width : 44px;
        $img-height: 70.75px;
        $sliderBackgroundImage      : 'slider.up.svg';
        $sliderBackgroundImage_hover: 'slider.up.hover.svg';;
    }
    @if $sliderType == right {
        $img-width : 70.75px;
        $img-height: 44px;
        $sliderBackgroundImage      : 'slider.right.svg';
        $sliderBackgroundImage_hover: 'slider.right.hover.svg';;
    }
    @if $sliderType == left {
        $img-width : 70.75px;
        $img-height: 44px;
        $sliderBackgroundImage      : 'slider.left.svg';
        $sliderBackgroundImage_hover: 'slider.left.hover.svg';;
    }

    @if $sliderType == round {
        $img-width : 70px;
        $img-height: 70px;
        $slider-dim: 18px;

        $sliderBackgroundImage      : 'slider.round.svg';
        $sliderBackgroundImage_hover: 'slider.round.hover.svg';;
    }

    @if $sliderType == fixed {
        $img-width : 44px;
        $img-height: 70.75px;
        $slider-dim: 18px;

        $sliderBackgroundImage: 'slider.fixed.svg';

        $lineTopRelativeToSlider: $margin;
        $gridTop   : $sliderTop + $lineTopRelativeToSlider + /*$margin + */$lineHeight; 
    }

    @if $sliderType == range {
        $img-width : 6px;
        $img-height: 6px;
        $slider-dim: $lineHeightPx;

        $sliderBackgroundImage   : 'slider.range.from.svg';
        $sliderBackgroundImage_to: 'slider.range.to.svg';

        $lineTopRelativeToSlider: 0; 
    }
    

    $factor: 0;
    @if $img-height > $img-width {
        $factor: $slider-dim / $img-height;
    } @else {
        $factor: $slider-dim / $img-width;
    }

    $sliderWidth : myRem($img-width * $factor);
    $sliderHeight: myRem($img-height * $factor); 

    @if $lineTopRelativeToSlider == null {
        $lineTopRelativeToSlider: $sliderHeight/2 - $lineHeight/2;
    }

    @if $gridTop == null {
        $gridTop: $sliderTop + $sliderHeight;
    }

    $lineTop        : $sliderTop + $lineTopRelativeToSlider;
    $lineTopNoMarker: $sliderTopNoMarker + $lineTopRelativeToSlider;

    $sliderBackgroundImage: url("images/#{$sliderBackgroundImage}");
    @if $sliderBackgroundImage_hover != null {
        $sliderBackgroundImage_hover: url("images/#{$sliderBackgroundImage_hover}");
    }

    @if $sliderBackgroundImage_to != null {
        $sliderBackgroundImage_to: url("images/#{$sliderBackgroundImage_to}");
    }
    @if $sliderBackgroundImage_to_hover != null {
        $sliderBackgroundImage_to_hover: url("images/#{$sliderBackgroundImage_to_hover}");
    }

    //The style for different slider-type
    .base-slider-container.#{$sliderType} {
       
        //width, height and postion    
        .line, .bar {
            top: $lineTop;
        }
        .slider {
            box-sizing: border-box;
            width : $sliderWidth; 
            height: $sliderHeight;

            //If there are different bg-image for from and to-slider => create style for each ELSE common style
            @if $sliderBackgroundImage_to == null {
                background-image: $sliderBackgroundImage;
            }
            @else {
                &.from {               
                    background-image: $sliderBackgroundImage;
                }
                &.to {               
                    background-image: $sliderBackgroundImage_to;
                }
            }
        }
        
        .pin { 
            top: $lineTop;
            width : $sliderWidth; 
        }

        @if $sliderBackgroundImage_hover != null {
            //hover on slider but only if it is active (not read-only)
            &.active .slider {
                &.state_hover, &:hover { 
                    //If there are different bg-image for from and to-slider => create style for each ELSE common style
                    @if $sliderBackgroundImage_to_hover == null {
                        background-image: $sliderBackgroundImage_hover;
                    }
                    @else {
                        &.from {               
                            background-image: $sliderBackgroundImage_hover;
                        }
                        &.to {               
                            background-image: $sliderBackgroundImage_to_hover;
                        }
                    }
                } 
            }
        }

        .grid {
            top: $gridTop;
        }


        //Adjust grid position if ticks are on the line (ticks_on_line = true)
        &.ticks-on-line {
            .grid             { top: $lineTop;         }
            &.no-marker .grid { top: $lineTopNoMarker; }
        }

        //Adjust all top-position if there are no marker
        &.no-marker {
            .line, 
            .bar,
            .pin    { top: $lineTopNoMarker !important;        }
            .slider { top: $sliderTopNoMarker;                 }
            .grid   { top: $sliderTopNoMarker + $sliderHeight; }
        }

        /****************************************************
        Special case for no marker and pin: 
        Adjust all top-position by adding top-margin if the pin is heigher than the slider
        ****************************************************/
        &.no-marker.has-pin {
            margin-top: max(0, - $pinMarginTop - $lineTopNoMarker);
        }
    } //end of .base-slider-container.#{$sliderType}
} //end of @each $sliderType in $sliderTypeList 

