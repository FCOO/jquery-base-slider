!function(a,b,c,d){"use strict";console.log("skide godt do");var e=0,f='<span class="bs"><span class="line" tabindex="-1"><span class="line-left"></span></span><span class="marker-min">0</span><span class="marker-max">1</span><span class="marker-from">0</span><span class="marker-to">0</span><span class="marker-single">0</span></span><span class="grid"></span><span class="bar"></span>',g='<span class="slider single"></span>',h='<span class="slider from"></span><span class="slider to"></span>',i='<span class="slider pin"></span>';b.BaseSlider=function(d,e,f){if(this.input=d,this.plugin_count=f,this.current_plugin=0,this.old_from=0,this.old_to=0,this.raf_id=null,this.dragging=!1,this.force_redraw=!1,this.is_key=!1,this.is_update=!1,this.is_start=!0,this.is_active=!1,this.is_resize=!1,this.is_click=!1,this.is_repeating_click=!1,this.$cache={win:a(b),body:a(c.body),input:a(d),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_pin:null,s_from:null,s_to:null,grid:null,grid_labels:[],buttons:{from:{},to:{}}},this.options=a.extend({type:"single",slider:"default",isInterval:"double"==e.type,pin_value:null,min:10,max:100,from:null,to:null,step:1,step_offset:0,min_interval:0,max_interval:0,p_values:[],from_fixed:!1,from_min:null,from_max:null,to_fixed:!1,to_min:null,to_max:null,prettify:null,prettify_text:null,marker_frame:!1,impact_line:!1,impact_line_reverse:!1,hide_bar_color:!1,bar_color:null,callback_on_dragging:!0,callback_delay:500,grid:!1,hide_minor_ticks:!1,major_ticks:null,major_ticks_offset:0,major_ticks_factor:1,ticks_on_line:!1,hide_min_max:!0,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" - ",disable:!1,buttons_attr:["firstBtn","previousBtn","nowBtn","nextBtn","lastBtn"],buttons_delta:[-99,-1,0,1,99],buttons:{from:{},to:{}},gridDistances:[1,2,5,10,20,50,100],onStart:null,onChange:null,onFinish:null,onUpdate:null},e),this.validate(),-1==this.options.gridDistances.indexOf(this.options.step))for(var g=0;g<this.options.gridDistances.length;g++)if(this.options.gridDistances[g]>this.options.step){this.options.gridDistances.splice(g,0,this.options.step);break}-1==this.options.gridDistances.indexOf(this.options.step)&&this.options.gridDistances.push(this.options.step),this.options.has_pin=null!==this.options.pin_value,this.options.p_keyboard_step=100*this.options.step/(this.options.max-this.options.min),this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single:0,p_single_real:0,p_from:0,p_from_real:0,p_to:0,p_to_real:0,p_bar_x:0,p_bar_w:0,p_min:0,p_max:0,true_min:0,true_max:0,grid_gap:0},this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null},this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from:0,p_from_left:0,p_to:0,p_to_left:0,p_single:0,p_single_left:0},this.init()},b.BaseSlider.prototype={init:function(a){this.options.total=this.options.max-this.options.min,this.options.oneP=this.toFixed(100/this.options.total),this.options.stepP=this.options.step*this.options.oneP;var b=100/this.options.total;for(this.coords.p_step=this.options.step*b,this.coords.p_step_offset=1==this.options.step?0:this.options.step_offset*b,this.coords.true_min=this.options.min+this.options.step_offset,this.coords.true_max=this.coords.true_min;this.coords.true_max+this.options.step<=this.options.max;)this.coords.true_max+=this.options.step;this.coords.p_min=(this.coords.true_min-this.options.min)*this.options.oneP,this.coords.p_max=(this.coords.true_max-this.options.min)*this.options.oneP,this.options.from=this.adjustValue(this.options.from),this.options.to=this.adjustValue(this.options.to),this.result.from=this.options.from,this.result.to=this.options.to,this.target="base",this.toggleInput(),this.append(),this.setMinMax(),a?(this.force_redraw=!0,this.calc(!0),this.onUpdate()):(this.force_redraw=!0,this.calc(!0),this.onStart()),this.drawHandles()},append:function(){function b(b){return"string"===a.type(b)?a("#"+b):b}this.$cache.container=a('<span class="base-slider '+this.options.slider+" js-base-slider-"+this.plugin_count+'"></span>'),this.$cache.input.before(this.$cache.container),this.$cache.input.prop("readonly",!0),this.$cache.cont=this.$cache.input.prev(),this.result.slider=this.$cache.cont,this.$cache.cont.html(f),this.$cache.bs=this.$cache.cont.find(".bs"),this.$cache.min=this.$cache.cont.find(".marker-min"),this.$cache.max=this.$cache.cont.find(".marker-max"),this.$cache.from=this.$cache.cont.find(".marker-from"),this.$cache.to=this.$cache.cont.find(".marker-to"),this.$cache.single=this.$cache.cont.find(".marker-single"),this.$cache.bar=this.$cache.cont.find(".bar"),this.$cache.line=this.$cache.cont.find(".line"),this.$cache.lineLeft=this.$cache.cont.find(".line-left"),this.$cache.grid=this.$cache.cont.find(".grid"),"single"===this.options.type?(this.$cache.cont.append(g),this.$cache.s_single=this.$cache.cont.find(".single"),this.$cache.from.css("visibility","hidden"),this.$cache.to.css("visibility","hidden"),this.$cache.lineLeft.remove()):(this.$cache.cont.append(h),this.$cache.s_from=this.$cache.cont.find(".from"),this.$cache.s_to=this.$cache.cont.find(".to"),this.options.has_pin&&(this.$cache.cont.append(i),this.$cache.s_pin=this.$cache.cont.find(".slider.pin")),this.options.impact_line&&this.$cache.cont.addClass("impact-line"),this.options.impact_line_reverse&&this.$cache.cont.addClass("impact-line-reverse")),this.options.hide_from_to&&(this.$cache.from.hide(),this.$cache.to.hide(),this.$cache.single.hide()),this.options.hide_bar_color&&this.$cache.bar.addClass("hide-bar-color"),this.options.bar_color&&this.$cache.bar.css("background-color",this.options.bar_color),this.options.marker_frame&&this.$cache.container.addClass("marker-frame"),this.options.hide_min_max&&this.options.hide_from_to&&this.$cache.container.addClass("no-marker"),this.options.ticks_on_line&&this.$cache.container.addClass("ticks-on-line"),this.options.has_pin&&this.$cache.container.addClass("has-pin"),this.options.buttons.from=this.options.buttons.from||{},this.options.buttons.to=this.options.buttons.to||{};for(var c=0;c<this.options.buttons_attr.length;c++){var d=this.options.buttons_attr[c];this.$cache.buttons.from[d]=b(this.options.buttons.from[d]),this.$cache.buttons.to[d]=b(this.options.buttons.to[d])}this.currentGridContainer=null,this.options.grid?this.appendGrid():this.$cache.grid.remove(),this.options.disable?(this.$cache.cont.addClass("disabled"),this.$cache.input.prop("disabled",!0)):this.options.read_only?(this.$cache.cont.addClass("read-only"),this.$cache.input.prop("disabled",!0)):(this.$cache.cont.addClass("active"),this.$cache.input.prop("disabled",!1),this.bindEvents())},remove:function(){this.$cache.cont.remove(),this.$cache.cont=null,this.$cache.line.off("keydown.irs_"+this.plugin_count),this.$cache.body.off("touchmove.irs_"+this.plugin_count),this.$cache.body.off("mousemove.irs_"+this.plugin_count),this.$cache.win.off("touchend.irs_"+this.plugin_count),this.$cache.win.off("mouseup.irs_"+this.plugin_count);var a,c,d,e;for(a in this.$cache.buttons)for(c=0;c<this.options.buttons_attr.length;c++)d=this.options.buttons_attr[c],e=this.$cache.buttons[a][d],e&&e.off("mousedown.irs_"+this.plugin_count+" mouseup.irs_"+this.plugin_count+" mouseleave.irs_"+this.plugin_count+" click.irs_"+this.plugin_count);this.$cache.grid_labels=[],b.cancelAnimationFrame(this.raf_id)},bindEvents:function(){this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),"single"===this.options.type?(this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single"))):(this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to"))),this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard"));var a,b,c,d,e;for(a in this.$cache.buttons)for(b=0;b<this.options.buttons_attr.length;b++)c=this.options.buttons_attr[b],d=this.options.buttons_delta[b],e=this.$cache.buttons[a][c],e&&(e.on("mousedown.irs_"+this.plugin_count,this.startRepeatingClick.bind(this)).on("mouseup.irs_"+this.plugin_count,this.endRepeatingClick.bind(this)).on("mouseleave.irs_"+this.plugin_count,this.endRepeatingClick.bind(this,!0)).on("click.irs_"+this.plugin_count,this.buttonClick.bind(this,{id:a,delta:d})),e.autoclickWhilePressed&&1==Math.abs(d)&&!e.data("auto-click-when-pressed-added")&&e.data("auto-click-when-pressed-added",!0),e.autoclickWhilePressed())},adjustResult:function(){},onFunc:function(a){this.adjustResult(),a&&"function"==typeof a&&a.call(this,this.result)},onCallback:function(){this.lastResult=this.lastResult||{},!this.options.callback||"function"!=typeof this.options.callback||this.result.min==this.lastResult.min&&this.result.max==this.lastResult.max&&this.result.from==this.lastResult.from&&this.result.to==this.lastResult.to||(this.adjustResult(),this.preCallback&&this.preCallback(this.result),this.options.context?this.options.callback.call(this.options.context,this.result):this.options.callback(this.result),this.lastResult=a.extend({},this.result))},onStart:function(){this.onCallback(),this.onFunc(this.options.onStart)},onChange:function(){if(this.dragging&&!this.options.callback_on_dragging&&this.options.callback_delay){this.delayTimeout&&b.clearTimeout(this.delayTimeout);var a=this;this.delayTimeout=b.setTimeout(function(){a.onCallback()},this.options.callback_delay)}(this.options.callback_on_dragging||!this.is_repeating_click&&!this.dragging)&&this.onCallback(),this.onFunc(this.options.onChange)},onFinish:function(){this.delayTimeout&&b.clearTimeout(this.delayTimeout),this.is_repeating_click||this.onCallback(),this.onFunc(this.options.onFinish)},onUpdate:function(){this.onFunc(this.options.onUpdate)},buttonClick:function(a){var b="from"==a.id?this.result.from:this.result.to;switch(a.delta){case 0:b=0;break;case-99:b=this.options.min;break;case 99:b=this.options.max;break;case 1:b+=this.options.step;break;case-1:b-=this.options.step}"from"==a.id?this.setFromValue(b):this.setToValue(b)},startRepeatingClick:function(){this.is_repeating_click=!0},endRepeatingClick:function(a){this.is_repeating_click=!1,a&&this.onCallback()},textClick:function(b){var c=a(b.target).data("base-slider-value");return this.options.isInterval?void(this.result.from>=c?this.setFromValue(c):this.result.to<=c?this.setToValue(c):Math.abs(this.result.from-c)>=Math.abs(this.result.to-c)?this.setToValue(c):this.setFromValue(c)):void this.setValue(c)},pointerMove:function(a){if(this.dragging){var b=a.pageX||a.originalEvent.touches&&a.originalEvent.touches[0].pageX;this.coords.x_pointer=b-this.coords.x_gap,this.calc(),this.drawHandles()}},pointerUp:function(b){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,(a.contains(this.$cache.cont[0],b.target)||this.dragging)&&this.onFinish(),this.$cache.cont.find(".state_hover").removeClass("state_hover"),this.force_redraw=!0,this.dragging=!1)},pointerDown:function(a,b){b.preventDefault();var c=b.pageX||b.originalEvent.touches&&b.originalEvent.touches[0].pageX;if(2!==b.button){switch(this.current_plugin=this.plugin_count,this.target=a,this.is_active=!0,this.dragging=!0,this.coords.x_gap=this.$cache.bs.offset().left,this.coords.x_pointer=c-this.coords.x_gap,this.calcPointer(),a){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single);break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from),this.$cache.s_from.addClass("state_hover"),this.$cache.s_from.addClass("type_last"),this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to),this.$cache.s_to.addClass("state_hover"),this.$cache.s_to.addClass("type_last"),this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from),this.coords.p_gap_right=this.toFixed(this.coords.p_to-this.coords.p_pointer),this.$cache.s_to.removeClass("type_last"),this.$cache.s_from.removeClass("type_last")}this.$cache.line.trigger("focus")}},pointerClick:function(a,b){b.preventDefault();var c=b.pageX||b.originalEvent.touches&&b.originalEvent.touches[0].pageX;2!==b.button&&(this.current_plugin=this.plugin_count,this.target=a,this.is_click=!0,this.coords.x_gap=this.$cache.bs.offset().left,this.coords.x_pointer=+(c-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(!0),this.drawHandles(),this.$cache.line.trigger("focus"))},key:function(a,b){if(!(this.current_plugin!==this.plugin_count||b.altKey||b.ctrlKey||b.shiftKey||b.metaKey)){switch(b.which){case 83:case 65:case 40:case 37:b.preventDefault(),this.moveByKey(!1);break;case 87:case 68:case 38:case 39:b.preventDefault(),this.moveByKey(!0)}return!0}},moveByKey:function(a){var b=this.coords.p_pointer;a?b+=this.options.p_keyboard_step:b-=this.options.p_keyboard_step,this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*b),this.is_key=!0,this.calc(),this.force_redraw=!0,this.drawHandles()},setMinMax:function(){if(this.options){if(this.options.hide_min_max)return this.$cache.min.hide(),void this.$cache.max.hide();this.$cache.min.html(this.decorate(this._prettify(this.options.min),this.options.min)),this.$cache.max.html(this.decorate(this._prettify(this.options.max),this.options.max)),this.labels.w_min=this.$cache.min.outerWidth(!1),this.labels.w_max=this.$cache.max.outerWidth(!1)}},adjustValue:function(a){return a=Math.max(this.coords.true_min,a),a=Math.min(this.coords.true_max,a),a=this.coords.true_min+this.options.step*Math.round((a-this.coords.true_min)/this.options.step)},setValue:function(a){this.setFromValue(a)},setFromValue:function(a){a=this.adjustValue(a),this.options.isInterval&&(a=Math.min(a,this.result.to)),this.old_from=this.result.from,this.result.from=a,this.old_from!=a&&(this.target="base",this.is_key=!0,this.calc(),this.force_redraw=!0,this.drawHandles()),this.onCallback()},setToValue:function(a){a=Math.max(a,this.result.from),a=this.adjustValue(a),this.old_to=this.result.to,this.result.to=a,this.old_to!=a&&(this.target="base",this.is_key=!0,this.calc(),this.force_redraw=!0,this.drawHandles()),this.onCallback()},setPin:function(a,b){this.options.has_pin&&(a=Math.min(this.options.max,a),a=Math.max(this.options.min,a),this.options.pin_value=a,this.target="base",this.calc(!0),this.$cache.s_pin.css({left:this.coords.p_pin_value+"%",color:b||"black"}))},getCoords_w_rs:function(){var a=this.$cache.container.innerWidth();this.coords.w_rs=a?a:this.coords.w_rs},calc:function(a){if(this.options&&(a&&(this.getCoords_w_rs(),"single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1)),this.coords.w_rs)){this.calcPointer(),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100);var b=100-this.coords.p_handle,c=this.toFixed(this.coords.p_pointer-this.coords.p_gap);switch("click"===this.target&&(c=this.toFixed(this.coords.p_pointer-this.coords.p_handle/2),this.target=this.chooseHandle(c)),0>c?c=0:c>b&&(c=b),this.target){case"base":var d=(this.options.max-this.options.min)/100,e=(this.result.from-this.options.min)/d,f=(this.result.to-this.options.min)/d;if(this.coords.p_single_real=this.toFixed(e),this.coords.p_from_real=this.toFixed(e),this.coords.p_to_real=this.toFixed(f),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_single=this.toFixed(e-this.coords.p_handle/100*e),this.coords.p_from=this.toFixed(e-this.coords.p_handle/100*e),this.coords.p_to=this.toFixed(f-this.coords.p_handle/100*f),this.options.has_pin){var g=(this.options.pin_value-this.options.min)/d,h=this.checkDiapason(this.toFixed(g),this.options.from_min,this.options.from_max);this.coords.p_pin_value=this.toFixed(h/100*b)}this.target=null;break;case"single":if(this.options.from_fixed)break;this.coords.p_single_real=this.calcWithStep(c/b*100),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_single=this.toFixed(this.coords.p_single_real/100*b);break;case"from":if(this.options.from_fixed)break;this.coords.p_from_real=this.calcWithStep(c/b*100),this.coords.p_from_real>this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from=this.toFixed(this.coords.p_from_real/100*b);break;case"to":if(this.options.to_fixed)break;this.coords.p_to_real=this.calcWithStep(c/b*100),this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to=this.toFixed(this.coords.p_to_real/100*b);break;case"both":if(this.options.from_fixed||this.options.to_fixed)break;c=this.toFixed(c+.1*this.coords.p_handle),this.coords.p_from_real=this.calcWithStep((c-this.coords.p_gap_left)/b*100),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from=this.toFixed(this.coords.p_from_real/100*b),this.coords.p_to_real=this.calcWithStep((c+this.coords.p_gap_right)/b*100),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to=this.toFixed(this.coords.p_to_real/100*b)}"single"===this.options.type?(this.coords.p_bar_x=0,this.coords.p_bar_w=this.coords.p_single+this.coords.p_handle/2,this.result.from_percent=this.coords.p_single_real,this.result.from=this.calcReal(this.coords.p_single_real)):(this.coords.p_bar_x=this.toFixed(this.coords.p_from+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to-this.coords.p_from),this.result.from_percent=this.coords.p_from_real,this.result.from=this.calcReal(this.coords.p_from_real),this.result.to_percent=this.coords.p_to_real,this.result.to=this.calcReal(this.coords.p_to_real)),this.calcMinMax(),this.calcLabels()}},calcPointer:function(){return this.coords.w_rs?(this.coords.x_pointer<0||isNaN(this.coords.x_pointer)?this.coords.x_pointer=0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),void(this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100))):void(this.coords.p_pointer=0)},chooseHandle:function(a){if("single"===this.options.type)return"single";var b=this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2;return a>=b?"to":"from"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&("single"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single+this.coords.p_handle/2-this.labels.p_single/2,this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single)):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=this.coords.p_from+this.coords.p_handle/2-this.labels.p_from/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to=this.labels.w_to/this.coords.w_rs*100,this.labels.p_to_left=this.coords.p_to+this.coords.p_handle/2-this.labels.p_to/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to)/2-this.labels.p_single/2,this.labels.p_single_left=this.toFixed(this.labels.p_single_left),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single)))},drawHandles:function(){this.getCoords_w_rs(),this.coords.w_rs&&(this.coords.w_rs!==this.coords.w_rs_old&&(this.target="base",this.is_resize=!0),(this.coords.w_rs!==this.coords.w_rs_old||this.force_redraw)&&(this.setMinMax(),this.calc(!0),this.drawLabels(),this.options.grid&&this.calcGridMargin(),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs),this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)&&((this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key)&&(this.drawLabels(),this.$cache.bar.css("left",this.coords.p_bar_x+"%"),this.$cache.bar.css("width",this.coords.p_bar_w+"%"),"single"===this.options.type?(this.$cache.s_single.css("left",this.coords.p_single+"%"),this.$cache.single.css("left",this.labels.p_single_left+"%"),this.$cache.input.prop("value",this.result.from),this.$cache.input.data("from",this.result.from)):(this.$cache.s_from.css("left",this.coords.p_from+"%"),this.$cache.s_to.css("left",this.coords.p_to+"%"),this.options.has_pin&&this.$cache.s_pin.css("left",this.coords.p_pin_value+"%"),this.$cache.lineLeft&&this.$cache.lineLeft.css({left:0,width:this.coords.p_bar_x+"%"}),(this.old_from!==this.result.from||this.force_redraw)&&this.$cache.from.css("left",this.labels.p_from_left+"%"),(this.old_to!==this.result.to||this.force_redraw)&&this.$cache.to.css("left",this.labels.p_to_left+"%"),this.$cache.single.css("left",this.labels.p_single_left+"%"),this.$cache.input.prop("value",this.result.from+";"+this.result.to),this.$cache.input.data("from",this.result.from),this.$cache.input.data("to",this.result.to)),this.old_from===this.result.from&&this.old_to===this.result.to||this.is_start||this.$cache.input.trigger("change"),this.old_from=this.result.from,this.old_to=this.result.to,this.is_resize||this.is_update||this.is_start||this.onChange(),(this.is_key||this.is_click)&&this.onFinish(),this.is_update=!1,this.is_resize=!1),this.is_start=!1,this.is_key=!1,this.is_click=!1,this.force_redraw=!1))},drawLabels:function(){if(this.options){var a,b,c;if(!this.options.hide_from_to)if("single"===this.options.type)a=this.decorate(this._prettify(this.result.from),this.result.from),this.$cache.single.html(a),this.calcLabels(),this.labels.p_single_left<this.labels.p_min+1?this.$cache.min.css("visibility","hidden"):this.$cache.min.css("visibility","visible"),this.labels.p_single_left+this.labels.p_single>100-this.labels.p_max-1?this.$cache.max.css("visibility","hidden"):this.$cache.max.css("visibility","visible");else{this.options.decorate_both?(a=this.decorate(this._prettify(this.result.from)),a+=this.options.values_separator,a+=this.decorate(this._prettify(this.result.to))):a=this.decorate(this._prettify(this.result.from)+this.options.values_separator+this._prettify(this.result.to),this.result.from),b=this.decorate(this._prettify(this.result.from),this.result.from),c=this.decorate(this._prettify(this.result.to),this.result.to),this.$cache.single.html(a),this.$cache.from.html(b),this.$cache.to.html(c),this.calcLabels();var d=Math.min(this.labels.p_single_left,this.labels.p_from_left),e=this.labels.p_single_left+this.labels.p_single,f=this.labels.p_to_left+this.labels.p_to,g=Math.max(e,f);this.labels.p_from_left+this.labels.p_from>=this.labels.p_to_left?(this.$cache.from.css("visibility","hidden"),this.$cache.to.css("visibility","hidden"),this.$cache.single.css("visibility","visible"),this.result.from===this.result.to?(this.$cache.from.css("visibility","visible"),this.$cache.single.css("visibility","hidden"),g=f):(this.$cache.from.css("visibility","hidden"),this.$cache.single.css("visibility","visible"),g=Math.max(e,f))):(this.$cache.from.css("visibility","visible"),this.$cache.to.css("visibility","visible"),this.$cache.single.css("visibility","hidden")),d<this.labels.p_min+1?this.$cache.min.css("visibility","hidden"):this.$cache.min.css("visibility","visible"),g>100-this.labels.p_max-1?this.$cache.max.css("visibility","hidden"):this.$cache.max.css("visibility","visible")}}},toggleInput:function(){this.$cache.input.toggleClass("hidden-input")},calcPercent:function(a){var b=(this.options.max-this.options.min)/100,c=(a-this.options.min)/b;return this.toFixed(c)},calcReal:function(a){var b=this.options.min,c=this.options.max,d=0;0>b&&(d=Math.abs(b),b+=d,c+=d);var e=(c-b)/100*a+b,f=this.options.step.toString().split(".")[1];return f?e=+e.toFixed(f.length):(e/=this.options.step,e*=this.options.step,e=+e.toFixed(0)),d&&(e-=d),e<this.options.min?e=this.options.min:e>this.options.max&&(e=this.options.max),f?+e.toFixed(f.length):this.toFixed(e)},calcWithStep:function(a){var b=Math.round((a-this.coords.p_step_offset)/this.coords.p_step)*this.coords.p_step+this.coords.p_step_offset;return b<this.coords.p_min&&(b=this.coords.p_min),b>100&&(b=100),100===a&&(b=100),b>this.coords.p_max&&(b=this.coords.p_max),this.toFixed(b)},checkMinInterval:function(a,b,c){var d,e,f=this.options;return f.min_interval?(d=this.calcReal(a),e=this.calcReal(b),"from"===c?e-d<f.min_interval&&(d=e-f.min_interval):d-e<f.min_interval&&(d=e+f.min_interval),this.calcPercent(d)):a},checkMaxInterval:function(a,b,c){var d,e,f=this.options;return f.max_interval?(d=this.calcReal(a),e=this.calcReal(b),"from"===c?e-d>f.max_interval&&(d=e-f.max_interval):d-e>f.max_interval&&(d=e+f.max_interval),this.calcPercent(d)):a},checkDiapason:function(a,b,c){var d=this.calcReal(a),e=this.options;return b&&"number"==typeof b||(b=e.min),c&&"number"==typeof c||(c=e.max),b>d&&(d=b),d>c&&(d=c),this.calcPercent(d)},toFixed:function(a){return a=a.toFixed(5),+a},_prettify:function(a){return this.options.prettify&&"function"==typeof this.options.prettify?this.options.prettify(a):a},_prettify_text:function(a){return this.options.prettify_text&&"function"==typeof this.options.prettify_text?this.options.prettify_text(a):a},checkEdges:function(a,b){return 0>a?a=0:a>100-b&&(a=100-b),this.toFixed(a)},validate:function(){var a=this.options,b=this.result;"string"==typeof a.min&&(a.min=+a.min),"string"==typeof a.max&&(a.max=+a.max),"string"==typeof a.from&&(a.from=+a.from),"string"==typeof a.to&&(a.to=+a.to),"string"==typeof a.step&&(a.step=+a.step),"string"==typeof a.from_min&&(a.from_min=+a.from_min),"string"==typeof a.from_max&&(a.from_max=+a.from_max),"string"==typeof a.to_min&&(a.to_min=+a.to_min),"string"==typeof a.to_max&&(a.to_max=+a.to_max),a.max<=a.min&&(a.min?a.max=2*a.min:a.max=a.min+1,a.step=1),("number"!=typeof a.from||isNaN(a.from))&&(a.from=a.min),("number"!=typeof a.to||isNaN(a.from))&&(a.to=a.max),(a.from<a.min||a.from>a.max)&&(a.from=a.min),(a.to>a.max||a.to<a.min)&&(a.to=a.max),"double"===a.type&&a.from>a.to&&(a.from=a.to),("number"!=typeof a.step||isNaN(a.step)||!a.step||a.step<0)&&(a.step=1),a.from_min&&a.from<a.from_min&&(a.from=a.from_min),a.from_max&&a.from>a.from_max&&(a.from=a.from_max),a.to_min&&a.to<a.to_min&&(a.to=a.to_min),a.to_max&&a.from>a.to_max&&(a.to=a.to_max),b&&(b.min!==a.min&&(b.min=a.min),b.max!==a.max&&(b.max=a.max),(b.from<b.min||b.from>b.max)&&(b.from=a.from),(b.to<b.min||b.to>b.max)&&(b.to=a.to)),("number"!=typeof a.min_interval||isNaN(a.min_interval)||!a.min_interval||a.min_interval<0)&&(a.min_interval=0),("number"!=typeof a.max_interval||isNaN(a.max_interval)||!a.max_interval||a.max_interval<0)&&(a.max_interval=0),a.min_interval&&a.min_interval>a.max-a.min&&(a.min_interval=a.max-a.min),a.max_interval&&a.max_interval>a.max-a.min&&(a.max_interval=a.max-a.min)},decorate:function(a,b){var c="",d=this.options;return d.prefix&&(c+=d.prefix),c+=a,d.max_postfix&&b===d.max&&(c+=d.max_postfix,d.postfix&&(c+=" ")),d.postfix&&(c+=d.postfix),c},updateFrom:function(){this.result.from=this.options.from,this.result.from_percent=this.calcPercent(this.result.from)},updateTo:function(){this.result.to=this.options.to,this.result.to_percent=this.calcPercent(this.result.to)},updateResult:function(){this.result.min=this.options.min,this.result.max=this.options.max,this.updateFrom(),this.updateTo()},appendGridContainer:function(){return this.getCoords_w_rs(),this.currentGridContainer?(this.totalGridContainerTop+=this.currentGridContainer.height(),this.currentGridContainer=a('<span class="grid"></span>').insertAfter(this.currentGridContainer),this.currentGridContainer.css("top",this.totalGridContainerTop+"px")):(this.currentGridContainer=this.$cache.grid,this.totalGridContainerTop=this.currentGridContainer.position().top),this.$cache.grid=this.$cache.cont.find(".grid"),this.currentGridContainer},appendTick:function(b,c){if(this.currentGridContainer){c=a.extend({minor:!1,color:""},c);var d=a('<span class="grid-pol" style="left:'+b+'%"></span>');return c.minor&&d.addClass("minor"),c.color&&d.css("background-color",c.color),d.appendTo(this.currentGridContainer),d}},appendText:function(b,c,e){if(this.currentGridContainer){e=a.extend({color:""},e);var f=this._prettify_text(c);this.options.decorate_text&&(f=(this.options.prefix?this.options.prefix:"")+f+(this.options.postfix?this.options.postfix:""));var g=a('<span class="grid-text" style="background-color:transparent; left: '+b+'%">'+f+"</span>");return g.appendTo(this.currentGridContainer),g.css("margin-left",-g.outerWidth(!1)/2+"px"),e.clickable&&(e.clickable=1==this.options.step||(c-this.options.step_offset)%this.options.step===0),!e.clickable||this.options.disable||this.options.read_only||(c=e.click_value!==d?e.click_value:c,g.data("base-slider-value",c).on("click.irs_"+this.plugin_count,this.textClick.bind(this)).addClass("clickable")),e.minor&&g.addClass("minor"),e.italic&&g.addClass("italic"),e.color&&g.css("color",e.color),g}},getTextWidth:function(a,b){var c=this.appendText(0,a,b),d=parseFloat(c.outerWidth(!1));return c.remove(),d},appendGrid:function(){this.options.grid&&this.appendStandardGrid()},appendStandardGrid:function(a){this._appendStandardGrid(a)},_appendStandardGrid:function(b,c){
this.appendGridContainer(),this.calcGridMargin();var d,e=this.options,f=this.$cache.grid.outerWidth(!1),g=0,h=e.min,i=0,j=0;for(e.gridDistanceStep=e.gridDistances[g],e.stepPx=e.step*f/e.total/e.major_ticks_factor,b=a.extend(b||{},{clickable:!0}),c=c||{};e.stepPx*e.gridDistanceStep<=4;)g++,g<e.gridDistances.length?e.gridDistanceStep=e.gridDistances[g]:e.gridDistanceStep=2*e.gridDistanceStep;e.tickDistanceNum=e.gridDistanceStep*e.step,e.tickDistancePx=e.gridDistanceStep*e.stepPx;var k=e.major_ticks;if(!k){for(h=e.min;h<=e.max;)(h-e.major_ticks_offset)*e.major_ticks_factor%e.tickDistanceNum===0&&(i=Math.max(i,this.getTextWidth(h))),h+=1;for(i+=6,g=0,k=e.gridDistances[g];k*e.tickDistancePx<i;)g++,k=g<e.gridDistances.length?e.gridDistances[g]:2*k}for(e.majorTickDistanceNum=e.tickDistanceNum*k,h=e.min;h<=e.max;)d=(h-e.major_ticks_offset)*e.major_ticks_factor,d%e.tickDistanceNum===0&&(d%e.majorTickDistanceNum===0?(this.appendTick(j,c),this.appendText(j,h,b)):e.hide_minor_ticks||this.appendTick(j,{minor:!0})),h+=1,j+=e.oneP},calcGridMargin:function(){this.getCoords_w_rs(),this.coords.w_rs&&("single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-.1),this.$cache.grid.css({width:this.toFixed(100-this.coords.p_handle)+"%",left:this.coords.grid_gap+"%"}))},update:function(b){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.options=a.extend(this.options,b),this.validate(),this.updateResult(),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop("readonly",!1),a.data(this.input,"baseSlider",null),this.remove(),this.input=null,this.options=null)}},a.fn.baseSlider=function(c){return this.each(function(){a.data(this,"baseSlider")||a.data(this,"baseSlider",new b.BaseSlider(this,c,e++))})}}(jQuery,this,document);